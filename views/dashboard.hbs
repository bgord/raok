<header data-display="flex" data-p="12" data-md-px="12" data-bg="gray-800">
  <h1 data-fs="20" data-ls="2" data-color="gray-100" data-fw="500">raok</h1>

  <div data-display="flex" data-ml="auto" data-mr="72" data-md-mr="24">
    <strong data-ml="12" data-md-ml="6" data-color="white">{{
      username
    }}</strong>
  </div>

  <a
    class="c-link"
    data-color="white"
    data-mr="12"
    data-md-mr="0"
    href="/logout"
  >
    Logout
  </a>
</header>

<main data-display="flex" data-mx="auto" data-mt="48" style="max-width: 1296px">
  <section data-grow="1" data-pr="48">
    <form method="POST" action="/add-article">
      <input type="hidden" name="_csrf" value="{{ _csrf }}" />

      <div data-display="flex" data-cross="end">
        <div
          data-display="flex"
          data-direction="column"
          data-mr="12"
          data-grow="1"
        >
          <label class="c-label" for="url" data-mb="6">Article URL </label>
          <input
            id="url"
            name="url"
            class="c-input"
            type="url"
            required
            placeholder="https://example.com/blogpost"
            data-grow="1"
          />
        </div>
        <button class="c-button" data-variant="secondary" type="submit">
          Add
        </button>
      </div>
    </form>
  </section>

  <div
    data-display="flex"
    data-direction="column"
    data-max-width="768"
    data-width="100%"
  >
    <section>
      <div
        data-display="flex"
        data-cross="center"
        data-bg="gray-100"
        data-bw="1"
        data-bc="gray-200"
        data-p="12"
      >
        <h2 data-fs="16" data-color="gray-800" data-fw="500">Newspapers</h2>
        <button
          data-reload
          class="c-button"
          data-variant="bare"
          type="button"
          data-ml="auto"
        >
          Refresh
        </button>
      </div>

      {{#unless newspapers}}
      <small data-md-px="12" data-mt="12" data-ml="6"
        >No newspapers added at the moment</small
      >
      {{/unless}}

      <ul style="list-style: none" data-mt="24">
        {{#each newspapers}}
        <li data-display="flex" data-direction="column" data-mb="24">
          <div data-display="flex" data-cross="center">
            <strong
              data-transform="uppercase"
              data-color="gray-600"
              data-bg="gray-200"
              data-px="6"
              data-br="4"
              data-ls="1"
              data-fs="12"
            >
              {{ this.status }}
            </strong>
            <span data-ml="12">Newspaper #{{ this.number }}</span>
            <span
              data-fs="14"
              data-color="gray-400"
              data-ml="auto"
              data-mr="6"
              data-timestamp="{{ this.scheduledAt }}"
              data-placement="inside"
            ></span>

            <button
              data-toggle-show="{{ this.id }}"
              data-status="visible"
              class="c-button"
              data-variant="bare"
            >
              <img height="16" width="16" src="/arrow-down-icon.svg" alt="" />
            </button>

            <button
              data-toggle-hide="{{ this.id }}"
              data-status="hidden"
              class="c-button"
              data-variant="bare"
            >
              <img height="16" width="16" src="/arrow-up-icon.svg" alt="" />
            </button>
          </div>

          <div data-toggle-target="{{ this.id }}" data-status="hidden">
            <div data-display="flex" data-mt="12" data-mb="24">
              {{#if this.hasBeenDelivered}}
              <form
                method="POST"
                action="/archive-newspaper/{{ this.id }}"
                data-mr="24"
              >
                <input type="hidden" name="_csrf" value="{{ ../_csrf }}" />
                <button type="submit" class="c-button" data-variant="secondary">
                  Archive
                </button>
              </form>
              {{/if}}

              {{#if this.hasFailed}}
              <form method="POST" action="/resend-newspaper/{{ this.id }}">
                <input type="hidden" name="_csrf" value="{{ ../_csrf }}" />

                <button type="submit" class="c-button" data-variant="primary">
                  Resend
                </button>
              </form>
              {{/if}}

              {{#if this.sentAt}}
              <form method="POST" action="/resend-newspaper/{{ this.id }}">
                <input type="hidden" name="_csrf" value="{{ ../_csrf }}" />

                <button type="submit" class="c-button" data-variant="primary">
                  Resend
                </button>
              </form>
              {{/if}}

              {{#if this.sentAt}}
              <span
                data-fs="14"
                data-color="gray-400"
                data-ml="auto"
                data-mr="6"
                data-timestamp="{{ this.sentAt }}"
                data-placement="inside"
              ></span>
              {{/if}}
            </div>

            <ul data-mt="6" data-mb="12" style="list-style: none">
              {{#each this.articles}}
              <li data-mt="6">
                <a
                  class="c-link"
                  data-color="gray-600"
                  href="{{ this.url }}"
                  target="_blank"
                  >{{ this.url }}</a
                >
              </li>
              {{/each}}
            </ul>
          </div>
        </li>
        {{/each}}
      </ul>
    </section>

    <section data-mt="48">
      <div data-bg="gray-100" data-bw="1" data-bc="gray-200" data-p="12">
        <h2
          data-fs="16"
          data-color="gray-800"
          data-fw="500"
          data-bw="2"
          data-bcb="gray-200"
          data-pb="6"
        >
          Articles
        </h2>

        <div data-display="flex" data-mt="24">
          <button
            id="select-all"
            type="button"
            class="c-button"
            data-variant="secondary"
            data-mr="12"
          >
            Select all
          </button>
          <button
            id="deselect-all"
            type="button"
            class="c-button"
            data-variant="secondary"
          >
            Deselect all
          </button>

          <form
            id="create-newspaper"
            method="POST"
            action="/create-newspaper"
            data-ml="auto"
          >
            <input type="hidden" name="_csrf" value="{{ _csrf }}" />

            <button type="submit" class="c-button" data-variant="primary">
              Create newspaper
            </button>
          </form>
        </div>
      </div>

      {{#unless articles}}
      <small data-md-px="12" data-mt="12" data-ml="6"
        >No articles added at the moment</small
      >
      {{/unless}}

      <ul style="list-style: none" data-mt="24">
        {{#each articles}}
        <li
          data-display="flex"
          data-cross="center"
          data-wrap="nowrap"
          data-mb="24"
          data-md-px="6"
        >
          <input
            id="urls"
            name="{{ this.id }}"
            class="c-checkbox"
            type="checkbox"
            data-mr="12"
          />
          <a
            href="{{ this.url }}"
            target="_blank"
            class="c-link"
            data-color="gray-700"
            style="
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
            "
          >
            {{ this.url }}
          </a>

          <strong
            data-transform="uppercase"
            data-color="gray-600"
            data-bg="gray-200"
            data-px="6"
            data-br="4"
            data-ls="1"
            data-fs="12"
            data-ml="auto"
            data-mr="12"
          >
            {{ this.status }}
          </strong>
          <form method="POST" action="/delete-article/{{ this.id }}">
            <input type="hidden" name="_csrf" value="{{../_csrf}}" />
            <button type="submit" class="c-button" data-variant="bare">
              Delete
            </button>
          </form>
        </li>
        {{/each}}
      </ul>
    </section>
  </div>
</main>
